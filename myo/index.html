<script src='myo.js'></script>
<script>
	var myo = Myo.create();
	
	// throw_cons holds all recent data.y values considered part of
	// a "throw"
	// throw_thresh is the threshold value of throw_cons for a throw
	// avoid_karate is the sensitivity of avoiding sideways karate chops as throws
	// throw_strength is the minimum strength of a throw
	var throw_cons = [];
	var throw_thresh = 3;
	var throw_strength = 300;
	
	// sens represents the sensitivity of a throw
	var sens = 250;
	
	// angle is the z-orientation at the most recent frame.
	var angle = 0;
	
	// left and right are the two extreme angles allowed
	var left = -0.6;
	var right = 0;
	
	myo.on('gyroscope', function(data){
		if(throw_cons.length == throw_thresh
		&& throw_cons[throw_cons.length - 1] > throw_strength) {
			throw_cons = [];
			console.log(angle);
			if(angle < right && angle > left) {
				swish(angle);
				console.log(swish(angle));
			}
		} else if(Math.abs(data.y) > sens) {
			throw_cons.push(data.y);
		} else {
			throw_cons = [];
		}
	});
	
	myo.on('orientation', function(data) {
		angle = data.z;
	});
	
	function swish(angle) {
		var variance = (right - left)/4;
		if(angle < left + variance) {
			return 4;
		} else if(angle < left + 2 * variance) {
			return 3;
		} else if(angle < left + 3 * variance) {
			return 2;
		} else {
			return 1;
		}
	}
	
</script>